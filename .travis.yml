language: android

jdk: oraclejdk8

android:
 components:
 - tools
 - platform-tools
 - build-tools-27.0.3
 - android-27
 - extra-google-m2repository
 - extra-android-m2repository

before_script:
- chmod 755 ./gradlew
- chmod 755 ./build-apk.sh

script:
- ./gradlew testDebugUnittest
- ./build-apk.sh

deploy:
  provider: releases
  api_key:
  secure: "mv+3Q27E4EPpD6GWf8TNLa5BEOJEVbiWkhMS0pc6/VmjdO2buqgNtHBtkBl44sNlqq3sPbss033zKBHgggEgzknf23PkXdsM+Ct5hmCkBf1COMMHtsLnR9UnwYBkDIOhAgTWRJYOe751ybc5kFDlnYzO4LIXq9EqXImNgh8kcReTPQtgHiuEpOrKu8khDpydcDU/fUJPzTyf02YQYxdxtlwMC5qv4ySessCiXatoC/fb46c8CdP5JwjXP3Ofz+u56Pt0gA71bIlY400ME2/9b2nsET5Oj1TdOyXgI2/IMMhMwRWQL+s8NpzTspXGqG63sBZn/2TIVu90YN36waw8MJ6/jpvQsEdqc44FYffWb3udRDdhNcnaRENe8sC1NyLL/gojM1UKNqLc3/GPvnLc+w0UrS5+TiulsRvJMRa34bjN0TgyQ1cunBTWbWuHwNVpqte/5rhFUqPq2jv5YRvE9BmOzh83g1LZy+pSmXldHBIwHv1Jqx0WEcqfywuCqL6CrHI2afp599OXva38k1D/kD1YL0CgQ1+i+EVzByZNjACjfdStsPtP1KMfVsexD3kQMn0lSjfrOlw3ErAeR5MiQqFyxo7/VJYgJzd2qygroc8PzHPgPC8zWYCyRLXJL499Id9rw7PdHxts2zBB5EF1wlt0O1xJXJ5xpu27sxl9qb4="  file: "./build/apk/juxebox.apk"
  file_glob: true
  skip_cleannup : true
  on:
    repo: JulienHivert/ptut_Ol-d_Tam
    branch: master
